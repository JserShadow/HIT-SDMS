webpackJsonp([1],{"7RY/":function(e,t){},"8s/5":function(e,t){},CMvz:function(e,t){},FGWh:function(e,t){},G8ov:function(e,t){},GiRy:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},l,!1,function(e){a("G8ov")},"data-v-5ebf0b9e",null).exports,o=a("/ocq"),s=a("ymRw"),i=a.n(s),c=(a("CMvz"),a("Xxa5")),u=a.n(c),v=a("exGp"),d=a.n(v),f=a("mtWM"),m=a.n(f),p={name:"PersonalInfomation",data:function(){return{activeName:"0",wxUserInfo:"",basicInfo:"",personalInfo:"",familyInfo:"",graduateInfo:"",Integrity:"0%"}},methods:{toEditStudentInfo:function(){this.$router.push("/edit/basicInfo")},calDataIntegrity:function(e){var t=0,a=0;for(var n in e)if("openId"!==n&&e[n])for(var l in e[n])e[n][l]?t++:a++;return(t/(t+a)*100).toFixed(1)+"%"}},created:function(){var e=this;return d()(u.a.mark(function t(){var a,n,l,r,o,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("userID")){t.next=10;break}return a=e.$router.currentRoute.query.userID,localStorage.setItem("userID",a),t.next=5,m.a.post("/login/getUserInfo",{value:a});case 5:return n=t.sent,console.log(n),e.wxUserInfo=n.data[0],e.$dialog.alert({message:"您还没有填写过基本信息,请前往填写"}).then(function(){e.$router.replace("/edit/basicInfo")}),t.abrupt("return");case 10:return l=localStorage.getItem("userID"),t.next=13,m.a.post("/login/getUserInfo",{value:l});case 13:return r=t.sent,e.wxUserInfo=r.data[0],t.next=17,m.a.post("/info/studentInfo",{openId:l});case 17:if((o=t.sent).data.success){t.next=21;break}return e.$dialog.alert({message:"您还没有填写过基本信息,请前往填写"}).then(function(){e.$router.replace("/edit/basicInfo")}),t.abrupt("return");case 21:e.basicInfo=o.data.studentInfo[0].basicInfo,e.personalInfo=o.data.studentInfo[0].personalInfo,e.familyInfo=o.data.studentInfo[0].familyInfo,e.graduateInfo=o.data.studentInfo[0].graduateInfo,s={basicInfo:e.basicInfo,personalInfo:e.personalInfo,familyInfo:e.familyInfo,graduateInfo:e.graduateInfo},e.Integrity=e.calDataIntegrity(s);case 27:case"end":return t.stop()}},t,e)}))()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"10px"}},[a("div",{staticClass:"avatar-container"},[a("img",{staticClass:"avatar",attrs:{src:e.wxUserInfo.avatarUrl,alt:"avatar"}})]),e._v(" "),a("div",[a("h2",[e._v(e._s(e.basicInfo.name))]),e._v(" "),a("div",{staticClass:"base-info-secondline"},[a("h3",[e._v(e._s(e.basicInfo.gender))]),e._v(" "),a("span",[e._v("|")]),e._v(" "),a("h3",[e._v(e._s(e.basicInfo.stuId))])])]),e._v(" "),a("div",{staticClass:"title"},[a("span",[e._v("学生信息(资料完成度："+e._s(e.Integrity)+")")]),e._v(" "),a("van-button",{staticClass:"edit-btn",attrs:{size:"small",type:"default"},on:{click:e.toEditStudentInfo}},[e._v("编辑")])],1),e._v(" "),a("van-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("van-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"专业",value:e.basicInfo.major}}),e._v(" "),a("van-cell",{attrs:{title:"班级",value:e.basicInfo.className}}),e._v(" "),a("van-cell",{attrs:{title:"少数民族",value:e.basicInfo.minority}}),e._v(" "),a("van-cell",{attrs:{title:"民族",value:e.basicInfo.volk}}),e._v(" "),a("van-cell",{attrs:{title:"生日",value:e.basicInfo.birthday}}),e._v(" "),a("van-cell",{attrs:{title:"籍贯",value:e.basicInfo.nativePlace}}),e._v(" "),a("van-cell",{attrs:{title:"寝室号",value:e.basicInfo.dormId}}),e._v(" "),a("van-cell",{attrs:{title:"入学方式",value:e.basicInfo.enrolment}}),e._v(" "),a("van-cell",{attrs:{title:"国防生",value:e.basicInfo.NDstudent}}),e._v(" "),a("van-cell",{attrs:{title:"党员",value:e.basicInfo.partyMember}})],1)],1),e._v(" "),a("van-collapse-item",{attrs:{title:"个人信息",name:"2"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"手机号",value:e.personalInfo.phoneNumber}}),e._v(" "),a("van-cell",{attrs:{title:"QQ",value:e.personalInfo.QQ}}),e._v(" "),a("van-cell",{attrs:{title:"电子邮箱",value:e.personalInfo.EMail}}),e._v(" "),a("van-cell",{attrs:{title:"身份证号",value:e.personalInfo.IDCard}}),e._v(" "),a("van-cell",{attrs:{title:"家庭住址",value:e.personalInfo.familyAddress}})],1)],1),e._v(" "),a("van-collapse-item",{attrs:{title:"家庭信息",name:"3"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"父亲姓名",value:e.familyInfo.fatherName}}),e._v(" "),a("van-cell",{attrs:{title:"父亲工作单位",value:e.familyInfo.fatherWorkPlace}}),e._v(" "),a("van-cell",{attrs:{title:"父亲手机号",value:e.familyInfo.fatherPhoneNumber}}),e._v(" "),a("van-cell",{attrs:{title:"母亲姓名",value:e.familyInfo.motherName}}),e._v(" "),a("van-cell",{attrs:{title:"母亲工作单位",value:e.familyInfo.motherWorkPlace}}),e._v(" "),a("van-cell",{attrs:{title:"母亲手机号",value:e.familyInfo.motherPhoneNumber}})],1)],1),e._v(" "),a("van-collapse-item",{attrs:{title:"毕业信息",name:"4"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"学籍去向",value:e.graduateInfo.schoolRollStatus}}),e._v(" "),a("van-cell",{attrs:{title:"毕业状态",value:e.graduateInfo.graduateRoute}}),e._v(" "),a("van-cell",{attrs:{title:"详情备注",value:e.graduateInfo.remark}})],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(p,h,!1,function(e){a("8s/5")},"data-v-3f5a2170",null).exports,_=a("mvHQ"),I=a.n(_),g={data:function(){return{lastStepDisable:!1,nextStepDisable:!1,lastRouter:"",nextRouter:"",routerName:"",openId:""}},computed:{active:function(){return this.$store.state.form_step}},watch:{active:function(e){this.handleRouter(e)}},methods:{lastStep:function(){this.$store.commit("stepBack"),this.$router.replace(this.lastRouter)},nextStep:function(){var e=this.$store.state.form_step,t=this.$refs.form.$data;console.log(t),0!==e||""!==t.name&&""!==t.gender&&""!==t.stuId?(this.$store.commit("stepForward"),this.$router.replace(this.nextRouter)):this.$toast({type:"fail",message:"重要数据不能为空",duration:2e3})},save:function(){var e=this;return d()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveData();case 2:e.$store.commit("setFormStep"),e.$router.replace("/");case 4:case"end":return t.stop()}},t,e)}))()},handleRouter:function(e){3===e?(this.nextStepDisable=!0,this.nextRouter=this.$store.state.routerList[e],this.lastRouter=this.$store.state.routerList[e-1]):0===e?(this.lastStepDisable=!0,this.lastRouter=this.$store.state.routerList[e],this.nextRouter=this.$store.state.routerList[e+1]):(this.lastRouter=this.$store.state.routerList[e-1],this.nextRouter=this.$store.state.routerList[e+1],this.lastStepDisable=!1,this.nextStepDisable=!1)},saveData:function(){var e=this;return d()(u.a.mark(function t(){var a,n,l,r,o,s,i,c,v;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$refs.form.$data,n=a.graduateRoute,l=a.remark,r=a.schoolRollStatus,o={graduateRoute:n,remark:l,schoolRollStatus:r},s=JSON.parse(localStorage.getItem("basic")),i=JSON.parse(localStorage.getItem("personal")),c=JSON.parse(localStorage.getItem("family")),v={openId:e.openId,basicInfo:s,personalInfo:i,familyInfo:c,graduateInfo:o},console.log(v),t.prev=7,console.log("trying"),t.next=11,m.a.post("/submit/studentInfo",v);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(7),console.log(t.t0),e.$toast({type:"fail",duation:2e3,message:"保存失败,请稍后重试"});case 17:e.$toast({type:"success",duation:2e3,message:"保存成功"});case 18:case"end":return t.stop()}},t,e,[[7,13]])}))()}},mounted:function(){var e=this.$store.state.form_step;this.handleRouter(e)},beforeRouteEnter:function(e,t,a){a(function(e){e.openId=localStorage.getItem("userID")})},beforeRouteUpdate:function(e,t,a){localStorage.setItem(t.name,I()(this.$refs.form.$data)),a()}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"text-align":"left"},attrs:{id:"step"}},[a("van-steps",{attrs:{active:e.active}},[a("van-step",[e._v("基本信息")]),e._v(" "),a("van-step",[e._v("个人信息")]),e._v(" "),a("van-step",[e._v("家庭信息")]),e._v(" "),a("van-step",[e._v("毕业信息")])],1)],1),e._v(" "),a("router-view",{ref:"form"}),e._v(" "),a("div",{staticClass:"buttons"},[a("van-button",{attrs:{type:"default",disabled:e.lastStepDisable},on:{click:e.lastStep}},[e._v("上一步")]),e._v(" "),e.nextStepDisable?a("van-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]):a("van-button",{attrs:{type:"default"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1)},staticRenderFns:[]};var k=a("VU/8")(g,x,!1,function(e){a("7RY/")},"data-v-0b37e0c9",null).exports,y={data:function(){return{name:"",gender:"",stuId:"",major:"",className:"",birthday:"",minority:"",volk:"",nativePlace:"",dormId:"",enrolment:"",NDstudent:"",partyMember:""}},mounted:function(){var e=JSON.parse(localStorage.getItem("basic"));e&&(this.name=e.name,this.gender=e.gender,this.stuId=e.stuId,this.major=e.major,this.className=e.className,this.birthday=e.birthday,this.minority=e.minority,this.volk=e.volk,this.nativePlace=e.nativePlace,this.dormId=e.dormId,this.enrolment=e.enrolment,this.NDstudent=e.NDstudent,this.partyMember=e.partyMember)}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-cell-group",[a("van-field",{attrs:{label:"姓名",placeholder:"请输入姓名",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("van-radio-group",{model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[a("van-cell-group",[a("van-cell",{staticClass:"required"},[a("div",{staticClass:"van-cell__title label"},[a("span",{staticClass:"van-cell__text"},[e._v("性别")])]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"男"}},[e._v("男")]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"女"}},[e._v("女")])],1)],1)],1),e._v(" "),a("van-field",{attrs:{label:"学号",placeholder:"请输入学号",required:""},model:{value:e.stuId,callback:function(t){e.stuId=t},expression:"stuId"}}),e._v(" "),a("van-field",{attrs:{label:"专业",placeholder:"请输入专业"},model:{value:e.major,callback:function(t){e.major=t},expression:"major"}}),e._v(" "),a("van-field",{attrs:{label:"班级",placeholder:"请输入班级"},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}}),e._v(" "),a("van-field",{attrs:{label:"生日",placeholder:"如：1997-06-13"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}}),e._v(" "),a("van-radio-group",{model:{value:e.minority,callback:function(t){e.minority=t},expression:"minority"}},[a("van-cell-group",[a("van-cell",[a("div",{staticClass:"van-cell__title label"},[a("span",{staticClass:"van-cell__text"},[e._v("少数民族")])]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"是"}},[e._v("是")]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"否"}},[e._v("否")])],1)],1)],1),e._v(" "),a("van-field",{attrs:{label:"民族",placeholder:"请输入民族"},model:{value:e.volk,callback:function(t){e.volk=t},expression:"volk"}}),e._v(" "),a("van-field",{attrs:{label:"籍贯",placeholder:"请输入籍贯"},model:{value:e.nativePlace,callback:function(t){e.nativePlace=t},expression:"nativePlace"}}),e._v(" "),a("van-field",{attrs:{label:"寝室号",placeholder:"请输入寝室号"},model:{value:e.dormId,callback:function(t){e.dormId=t},expression:"dormId"}}),e._v(" "),a("van-field",{attrs:{label:"入学方式",placeholder:"请输入入学方式"},model:{value:e.enrolment,callback:function(t){e.enrolment=t},expression:"enrolment"}}),e._v(" "),a("van-radio-group",{model:{value:e.NDstudent,callback:function(t){e.NDstudent=t},expression:"NDstudent"}},[a("van-cell-group",[a("van-cell",[a("div",{staticClass:"van-cell__title label"},[a("span",{staticClass:"van-cell__text"},[e._v("国防生")])]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"是"}},[e._v("是")]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"否"}},[e._v("否")])],1)],1)],1),e._v(" "),a("van-radio-group",{model:{value:e.partyMember,callback:function(t){e.partyMember=t},expression:"partyMember"}},[a("van-cell-group",[a("van-cell",[a("div",{staticClass:"van-cell__title label"},[a("span",{staticClass:"van-cell__text"},[e._v("党员")])]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"是"}},[e._v("是")]),e._v(" "),a("van-radio",{staticClass:"radio",attrs:{name:"否"}},[e._v("否")])],1)],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(y,N,!1,function(e){a("hQOA")},"data-v-7f168065",null).exports,R={data:function(){return{phoneNumber:"",QQ:"",EMail:"",IDCard:"",familyAddress:""}},mounted:function(){var e=JSON.parse(localStorage.getItem("personal"));e&&(this.phoneNumber=e.phoneNumber,this.QQ=e.QQ,this.EMail=e.EMail,this.IDCard=e.IDCard,this.familyAddress=e.familyAddress)}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-cell-group",[a("van-field",{attrs:{placeholder:"请输入手机号",label:"手机号"},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入QQ",label:"QQ"},model:{value:e.QQ,callback:function(t){e.QQ=t},expression:"QQ"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入电子邮箱",label:"电子邮箱"},model:{value:e.EMail,callback:function(t){e.EMail=t},expression:"EMail"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入身份证号",label:"身份证号"},model:{value:e.IDCard,callback:function(t){e.IDCard=t},expression:"IDCard"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入家庭住址",label:"家庭住址",type:"textarea"},model:{value:e.familyAddress,callback:function(t){e.familyAddress=t},expression:"familyAddress"}})],1)},staticRenderFns:[]};var $=a("VU/8")(R,P,!1,function(e){a("do8e")},null,null).exports,C={data:function(){return{fatherName:"",fatherWorkPlace:"",fatherPhoneNumber:"",motherName:"",motherWorkPlace:"",motherPhoneNumber:""}},mounted:function(){var e=JSON.parse(localStorage.getItem("family"));e&&(this.fatherName=e.fatherName,this.fatherWorkPlace=e.fatherWorkPlace,this.fatherPhoneNumber=e.fatherPhoneNumber,this.motherName=e.motherName,this.motherWorkPlace=e.motherWorkPlace,this.motherPhoneNumber=e.motherPhoneNumber)}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"cell-title"},[e._v("父亲信息")]),e._v(" "),a("van-cell-group",[a("van-field",{attrs:{placeholder:"请输入姓名",label:"姓名"},model:{value:e.fatherName,callback:function(t){e.fatherName=t},expression:"fatherName"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入工作单位",label:"工作单位"},model:{value:e.fatherWorkPlace,callback:function(t){e.fatherWorkPlace=t},expression:"fatherWorkPlace"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入手机号",label:"手机号"},model:{value:e.fatherPhoneNumber,callback:function(t){e.fatherPhoneNumber=t},expression:"fatherPhoneNumber"}})],1),e._v(" "),a("div",{staticClass:"cell-title"},[e._v("母亲信息")]),e._v(" "),a("van-cell-group",[a("van-field",{attrs:{placeholder:"请输入姓名",label:"姓名"},model:{value:e.motherName,callback:function(t){e.motherName=t},expression:"motherName"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入工作单位",label:"工作单位"},model:{value:e.motherWorkPlace,callback:function(t){e.motherWorkPlace=t},expression:"motherWorkPlace"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入手机号",label:"手机号"},model:{value:e.motherPhoneNumber,callback:function(t){e.motherPhoneNumber=t},expression:"motherPhoneNumber"}})],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(C,D,!1,function(e){a("GiRy")},"data-v-3dbf7620",null).exports,w={data:function(){return{schoolRollStatus:"",graduateRoute:"",remark:""}},mounted:function(){var e=JSON.parse(localStorage.getItem("graduate"));e&&(this.schoolRollStatus=e.schoolRollStatus,this.graduateRoute=e.graduateRoute,this.remark=e.remark)}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-cell-group",[a("van-field",{attrs:{placeholder:"请输入学籍状态",label:"学籍状态"},model:{value:e.schoolRollStatus,callback:function(t){e.schoolRollStatus=t},expression:"schoolRollStatus"}}),e._v(" "),a("van-field",{attrs:{placeholder:"请输入毕业去向",label:"毕业去向"},model:{value:e.graduateRoute,callback:function(t){e.graduateRoute=t},expression:"graduateRoute"}}),e._v(" "),a("van-field",{attrs:{label:"详情备注",type:"textarea"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)},staticRenderFns:[]};var W=a("VU/8")(w,M,!1,function(e){a("FGWh")},null,null).exports;n.default.use(i.a),n.default.use(o.a);var E=new o.a({routes:[{path:"/",name:"PersonalInfomation",component:b},{path:"/edit",name:"Form",component:k,children:[{name:"basic",path:"basicInfo",component:S},{name:"personal",path:"personalInfo",component:$},{name:"family",path:"familyInfo",component:Q},{name:"graduate",path:"graduateInfo",component:W}]}]}),F=a("NYxO");n.default.use(F.a);var U=new F.a.Store({state:{form_step:0,routerList:["/edit/basicInfo","/edit/personalInfo","/edit/familyInfo","/edit/graduateInfo"]},mutations:{stepForward:function(e){e.form_step++},stepBack:function(e){e.form_step--},setFormStep:function(e){e.form_step=0}}});n.default.config.productionTip=!1,new n.default({el:"#app",router:E,store:U,components:{App:r},template:"<App/>"})},do8e:function(e,t){},hQOA:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.06b2775ac1d854e1d710.js.map